<!-- app/views/pages/home.html.erb -->

<!-- Hero Section -->
<div class="hero text-white text-center d-flex align-items-center justify-content-center" style="position: relative; height: 35vh; background-image: url('https://res.cloudinary.com/dvpkudizj/image/upload/v1700000000/counter_strike_jwaegh.png'); background-size: cover; background-position: center;">

  <!-- Overlay oscuro -->
  <div class="overlay"></div>

  <!-- Contenido -->
  <div class="container hero-content">
    <h1 class="display-5 fw-bold">Compra y vende skins de Counter Strike</h1>
    <%= link_to "Explorar Marketplace", products_path, class: "btn btn-success btn-lg hero-btn" %>
  </div>
</div>

<!-- Barra de búsqueda -->
<div class="container my-4">
  <div class="input-group">
    <%= form_with url: products_path, method: :get, local: true, class: "w-100" do |form| %>
      <div class="input-group">
        <%= form.text_field :query, placeholder: "Buscar skins o cuentas...", class: "form-control", id: "search-bar" %>
        <%= form.submit "Buscar", class: "btn btn-success" %>
      </div>
    <% end %>
  </div>
  <ul id="suggestions" class="list-group mt-2"></ul>
</div>


<!-- Productos Destacados -->
<div class="container my-5">
  <h2 class="text-center mb-4 fw-bold text-success text-uppercase">OFERTAS DESTACADAS</h2>
  <div class="row">
    <% @products.each do |product| %>
      <%= render 'products/product_card', product: product %>
    <% end %>
  </div>
</div>

<!-- Explorar más -->
<div class="text-center my-4">
  <%= link_to "Ver todos los productos", products_path, class: "btn btn-outline-success btn-lg" %>
</div>



<!-- Métodos de Pago -->
<div class="container my-5 text-white py-4">
  <h2 class="text-center mb-4 fw-bold text-success">Elige entre más de 40 métodos de pago seguros</h2>
  <div class="row justify-content-center">

    <div class="col-md-3">
      <div class="card text-center bg-dark border-success shadow-lg py-3 payment-card">
        <img src="https://res.cloudinary.com/dvpkudizj/image/upload/v1700000000/visa_logo_lyjsv9.png" alt="Visa" class="img-fluid mx-auto mb-2 payment-logo" style="width: 80px;">
        <p class="fw-bold text-success">$500 / Trans</p>
        <p class="fw-bold text-success">0.25% TARIFA + 0.35$</p>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center bg-dark border-success shadow-lg py-3 payment-card">
        <img src="https://res.cloudinary.com/dvpkudizj/image/upload/v1700000000/paypal_logo_owbsz2.png" alt="PayPal" class="img-fluid mx-auto mb-2 payment-logo" style="width: 80px;">
        <p class="fw-bold text-success">$1000 / Trans</p>
        <p class="fw-bold text-success">0% TARIFA</p>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center bg-dark border-success shadow-lg py-3 payment-card">
        <img src="https://res.cloudinary.com/dvpkudizj/image/upload/v1700000000/bitcoin_logo_nrxnnb.png" alt="Bitcoin" class="img-fluid mx-auto mb-2 payment-logo" style="width: 80px;">
        <p class="fw-bold text-success">$3500 / Trans</p>
        <p class="fw-bold text-success">1.5% TARIFA</p>
      </div>
    </div>

    <div class="col-md-3">
      <div class="card text-center bg-dark border-success shadow-lg py-3 payment-card">
        <img src="https://res.cloudinary.com/dvpkudizj/image/upload/v1700000000/tether_logo_jgc2lr.png" alt="Tether" class="img-fluid mx-auto mb-2 payment-logo" style="width: 80px;">
        <p class="fw-bold text-success">$3500 / Trans</p>
        <p class="fw-bold text-success">2% TARIFA</p>
      </div>
    </div>

  </div>
</div>

<!-- FOOTER -->
<footer class="bg-dark text-light py-4 mt-5">
  <div class="container">
    <div class="row">
      <div class="col-md-4 text-center text-md-start">
        <h5 class="fw-bold text-success">Quick Links</h5>
        <ul class="list-unstyled">
          <li><a href="/about" class="text-light text-decoration-none">About Us</a></li>
          <li><a href="/market" class="text-light text-decoration-none">Market</a></li>
          <li><a href="/contact" class="text-light text-decoration-none">Contact</a></li>
        </ul>
      </div>
      <div class="col-md-4 text-center">
        <h5 class="fw-bold text-success">Follow Us</h5>
        <ul class="list-inline">
          <li class="list-inline-item">
            <a href="#" class="text-success"><i class="fab fa-facebook fa-2x"></i></a>
          </li>
          <li class="list-inline-item">
            <a href="#" class="text-success"><i class="fab fa-twitter fa-2x"></i></a>
          </li>
          <li class="list-inline-item">
            <a href="#" class="text-success"><i class="fab fa-instagram fa-2x"></i></a>
          </li>
          <li class="list-inline-item">
            <a href="#" class="text-success"><i class="fab fa-discord fa-2x"></i></a>
          </li>
        </ul>
      </div>
      <div class="col-md-4 text-center text-md-end">
        <h1 class="fw-bold text-success">PlayMarket</h1>
        <p class="fs-4 text-success">You want it, you own it.</p>
      </div>
    </div>
    <div class="mt-3 text-center">
      <p class="small mb-0">&copy; <%= Time.now.year %> PlayMarket. All rights reserved.</p>
    </div>
  </div>
</footer>


<style>
  .payment-logo {
    height: 50px;
    max-width: 100px;
    object-fit: contain;
  }

  .payment-method:nth-child(2) .payment-logo {
    height: 60px; /* Ajuste específico para PayPal */
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    function startCountdown(elementId, duration) {
      const countdownElement = document.getElementById(elementId);
      if (!countdownElement) return;

      let targetTime = new Date().getTime() + duration;

      function updateCountdown() {
        let now = new Date().getTime();
        let timeLeft = targetTime - now;

        if (timeLeft <= 0) {
          countdownElement.innerHTML = "00:00:00";
          return;
        }

        let hours = Math.floor((timeLeft / (1000 * 60 * 60)) % 24);
        let minutes = Math.floor((timeLeft / (1000 * 60)) % 60);
        let seconds = Math.floor((timeLeft / 1000) % 60);

        countdownElement.innerHTML = `${String(hours).padStart(2, "0")}:${String(minutes).padStart(2, "0")}:${String(seconds).padStart(2, "0")}`;
      }

      updateCountdown();
      setInterval(updateCountdown, 1000);
    }

    document.querySelectorAll("[id^='countdown-']").forEach((element) => {
      let randomDuration = Math.floor(Math.random() * (2 * 60 * 60 * 1000 - 10 * 60 * 1000)) + 10 * 60 * 1000;
      startCountdown(element.id, randomDuration);
    });
  });
</script>
